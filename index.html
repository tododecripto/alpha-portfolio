<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TDC Alpha Portfolio</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:linear-gradient(135deg,#0a0a14 0%,#151528 50%,#0d1b2a 100%);min-height:100vh;color:#e4e4e4}
        .header{background:rgba(0,0,0,0.5);padding:20px 30px;border-bottom:2px solid #e94560;display:flex;justify-content:space-between;align-items:center}
        .header h1{color:#e94560;font-size:1.5rem}
        .container{max-width:1200px;margin:0 auto;padding:30px}
        .summary-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}
        .stat-card{background:rgba(255,255,255,0.05);padding:25px;border-radius:15px;border:1px solid rgba(255,255,255,0.1);text-align:center}
        .stat-label{font-size:0.8rem;color:#8892b0;text-transform:uppercase;margin-bottom:8px}
        .stat-value{font-size:1.8rem;font-weight:800;color:#fff}
        .positive{color:#6bcb77}
        .negative{color:#e94560}
        table{width:100%;border-collapse:collapse;margin-top:20px;background:rgba(255,255,255,0.03);border-radius:12px;overflow:hidden}
        th{text-align:left;padding:15px;background:rgba(0,0,0,0.3);color:#8892b0;font-size:0.75rem;text-transform:uppercase}
        td{padding:15px;border-bottom:1px solid rgba(255,255,255,0.05)}
        .ticker{font-weight:700;color:#4d96ff;font-size:1.1rem}
        .category-tag{background:rgba(77,150,255,0.1);color:#4d96ff;padding:3px 10px;border-radius:6px;font-size:0.7rem}
        .roi-positive{color:#6bcb77;font-weight:700}
        .roi-negative{color:#e94560;font-weight:700}
        .loading{text-align:center;padding:50px;color:#8892b0}
        .last-update{text-align:right;color:#8892b0;font-size:0.8rem;margin-bottom:20px}
    </style>
</head>
<body>
    <div class="header">
        <h1>ðŸ’Ž TDC ALPHA PORTFOLIO</h1>
        <div style="color:#8892b0">Fund Manager: Niki AI</div>
    </div>
    <div class="container">
        <div class="last-update">Actualizado: <span id="update-time">--</span></div>
        
        <div class="summary-grid">
            <div class="stat-card">
                <div class="stat-label">Valor del Fondo</div>
                <div class="stat-value" id="total-value">$--</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ROI Total</div>
                <div class="stat-value" id="total-roi">--%</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Fondo Inicial</div>
                <div class="stat-value">$5,000.00</div>
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Activo</th>
                    <th>CategorÃ­a</th>
                    <th>Cantidad</th>
                    <th>Compra</th>
                    <th>Actual</th>
                    <th>ROI</th>
                    <th>Valor</th>
                </tr>
            </thead>
            <tbody id="portfolio-body">
                <tr><td colspan="7" class="loading">Cargando datos del mercado...</td></tr>
            </tbody>
        </table>
    </div>

    <script>
        // Portfolio data - Fund Manager updates this
        const portfolio = [
            {ticker:"BTC",category:"Legacy",amount:0.0135,buyPrice:95000},
            {ticker:"ETH",category:"L1",amount:0.4381,buyPrice:3500},
            {ticker:"SOL",category:"L1",amount:6.6288,buyPrice:220},
            {ticker:"ZRO",category:"Gems",amount:149.5491,buyPrice:2.34},
            {ticker:"ONDO",category:"RWA",amount:151.5152,buyPrice:1.10},
            {ticker:"LINK",category:"DeFi",amount:5.6838,buyPrice:22},
            {ticker:"AAVE",category:"DeFi",amount:0.3333,buyPrice:250}
        ];

        async function loadPrices() {
            try {
                const ids = {
                    BTC:"bitcoin",ETH:"ethereum",SOL:"solana",
                    ZRO:"layerzero",ONDO:"ondo",LINK:"chainlink",AAVE:"aave"
                };
                const symbols = portfolio.map(p => ids[p.ticker]).join(",");
                const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${symbols}&vs_currencies=usd`);
                const prices = await response.json();
                
                const tbody = document.getElementById("portfolio-body");
                tbody.innerHTML = "";
                
                let totalValue = 0;
                let totalCost = 0;
                
                portfolio.forEach(pos => {
                    const coinId = ids[pos.ticker];
                    const currentPrice = prices[coinId]?.usd || pos.buyPrice;
                    const value = pos.amount * currentPrice;
                    const cost = pos.amount * pos.buyPrice;
                    const roi = ((currentPrice - pos.buyPrice) / pos.buyPrice) * 100;
                    
                    totalValue += value;
                    totalCost += cost;
                    
                    const roiClass = roi >= 0 ? "roi-positive" : "roi-negative";
                    const roiSign = roi >= 0 ? "+" : "";
                    
                    const tr = document.createElement("tr");
                    tr.innerHTML = `
                        <td><span class="ticker">$${pos.ticker}</span></td>
                        <td><span class="category-tag">${pos.category}</span></td>
                        <td>${pos.amount.toFixed(4)}</td>
                        <td>$${pos.buyPrice.toLocaleString()}</td>
                        <td>$${currentPrice.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})}</td>
                        <td class="${roiClass}">${roiSign}${roi.toFixed(2)}%</td>
                        <td style="font-weight:700">$${value.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})}</td>
                    `;
                    tbody.appendChild(tr);
                });
                
                document.getElementById("total-value").textContent = "$" + totalValue.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2});
                
                const totalRoi = ((totalValue - totalCost) / totalCost) * 100;
                const roiEl = document.getElementById("total-roi");
                roiEl.textContent = (totalRoi >= 0 ? "+" : "") + totalRoi.toFixed(2) + "%";
                roiEl.className = "stat-value " + (totalRoi >= 0 ? "positive" : "negative");
                
                document.getElementById("update-time").textContent = new Date().toLocaleString("es-MX");
                
            } catch (e) {
                console.error(e);
                document.getElementById("portfolio-body").innerHTML = `<tr><td colspan="7" class="loading">Error cargando precios. Recarga la pÃ¡gina.</td></tr>`;
            }
        }
        
        loadPrices();
        setInterval(loadPrices, 60000); // Refresh every minute
    </script>
</body>
</html>